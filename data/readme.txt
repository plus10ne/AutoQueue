©Plus_One

# Name
直播自动排队脚本


## Introduction - 介绍
AutoQueue.py：主程序，执行爬虫和抓取
Readtxt.py：读写txt文件（1.2弃用）
Deletetxt.py：删除最早的txt文件记录（1.2弃用）
Deletetxt2.py：删除最近的txt文件记录（1.2弃用）
涉及库：time,keyboard,requests
v2.0引入QT制作前端界面，设计PyQt6的相关库

### Summary - 概要
该脚本用于在哔哩哔哩弹幕网直播间抓取弹幕，并识别设置的特殊弹幕进行排队

### Features - 特性

## Requirements - 必要条件
环境：python3最佳，但也提供打包的exe文件

## Configuration - 配置

## Installation - 安装

## Usage - 用法
1、将用来显示排队名单的obs文本框设置为“读取文件”，路径为该脚本中AutoQueue/data/data.txt
2、点击AutoQueue.exe启动脚本
3、在命令指示符窗口使用‘ctrl’+‘d’键删除最早一条记录
4、使用‘ctrl’+‘c’或关闭命令提示符窗口以终止程序运行
5、如需重新设置需要读取的弹幕口令，可以在文件“data/trigger.txt”下更改
6、如需重新设置读取的直播间api，可在文件“data/url.txt”下更改（获取api方法请自行搜索）

v2.0后制作了前端界面，可以通过操作前端界面来实现以上功能

## Development - 开发

## Changelog - 更新日志
v1.1：
1.修复了读取txt文件时无法识别重复id的bug
2.增加了‘ctrl’+‘e’删除最新一条记录的功能

v1.2：
1.添加了log记录功能，记录程序开始运行、每次排队和完成的时间和id
2.优化了文件读写部分的算法，全部重写成with语句
3.摒弃了跨文件调用
4.伪装头文件加入了cookie

v1.3：
1、添加了将队首名字移动到队末尾的功能
2、添加了删除队首名字且不记录的功能
3、改成了每0.05s读取一次弹幕
4、修改了启动bat脚本的文件路径

v1.4
1、经过加入uid识别后，发现手动输入无uid这一选项时会发生闪退，取消

v1.5
1、改成了不按照秒数来读取弹幕，直接调用while的无限循环结构

v2.0
1、增加前端界面，可以选择完成、删除、移至队尾、查看log功能
2、自动更新list
3、预计新增字体颜色修改、list背景颜色修改功能

v2.1
1、增加了暂停排队功能，可以通过点击继续排队恢复
2、删掉了上个版本中无意留下的timer，提高了程序运行速度
3、修改了窗口的名字

v2.2
1、删除了【启动程序.bat】，避免了启动bat文件产生的黑框
2、通过增加os.exit(）语句实现了关闭前端页面时，后端逻辑进程也终止
3、仍然存在小概率读取不到trigger弹幕的问题，可以通过在while循环中打印时间和弹幕来判断

v2.3
忘记改了啥了

v2.4
1、使用了【深渊排队+层数】的排队方式，示例：深渊排队9
2、增加了排队列表id前显示层数的功能
3、修复了人工输入的情况下，换行符不正确的问题

v2.5
1、修复了排队时会出现多余空行的bug
2、增加了刷新list的时间（5s改成6s），降低了刷新的速度，但给用户操作多留了时间
3、优化了人工输入的情况下，换行符不正确的问题，增加了自动识别最后一行是否为换行符，来决定输入内容是否需要换行符

v2.6
1、修复了当输入的【深渊排队】后的数字不在设定中会出现错误显示的情况

v2.7
1、增加了对于【移至队尾】的判断逻辑，若对已经在队尾的id操作不生效小
2、把之前6s刷新一次的列表改成了每秒刷新，添加了新的语句用来记录刷新之前的选项，避免选中后超时导致被选中的id变为未选中状态
3、增加了去掉弹幕中空格的功能，使得弹幕读取更灵活
***本次更新可能导致时空复杂度上升***
存在问题：【完成】和【删除】选项会在未选择的情况下默认选择最新一条记录

v2.8
1、修改了【暂停排队】时提示标签的样式，增大了字体以显得更醒目



## FAQ - 常见问题

## Support - 支持

### Dos - 文档

### Contact - 联系
如需联系请发送邮件到yjyworking@163.com

## Authors and acknowledgment - 贡献者和感谢

## License - 版权信息